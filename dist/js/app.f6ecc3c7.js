!function(t){var e={};function o(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=1)}([function(t,e,o){(e=o(2)(!1)).push([t.i,":host{font-family:'courier', monospace;display:flex;color:#67615e;width:100%}:host *{box-sizing:border-box}:host .autocomplete-wrapper{width:100%}:host input{background-color:#fff;border:#d6d4d3 1px solid;padding-left:40px;height:40px;width:100%;outline:none}:host input:focus{box-shadow:1px 1px 2px #d6d4d3}:host .input-wrapper{position:relative;display:flex}.search-icon{position:absolute;transform:translate(50%, -50%);top:50%;left:10px}.search-icon:after{content:'';height:8px;width:8px;display:block;border:2px solid #999;border-radius:50%}.search-icon:before{content:'';position:absolute;right:0;bottom:-4px;display:block;border:1px solid #999;height:4px;transform:rotate(-45deg)}:host .dropdown{background-color:#fff;margin:0 0 0 40px;position:relative;border:1px solid #d6d4d3;border-top:none;box-shadow:1px 1px 2px #d6d4d3;display:none;max-height:600px;overflow:auto}:host .dropdown.display{display:block}:host .list-item{background:#fff;height:40px;display:flex;justify-content:flex-start;align-items:center;text-align:right;padding:10px;font-size:100%;white-space:nowrap}:host .list-item.active,:host .list-item:hover{background:#fdf35e;color:#999;cursor:pointer}:host .icon-profile{border-radius:50%;overflow:hidden;width:30px;height:30px;min-width:30px;margin-right:10px}:host .icon-profile img{max-width:100%}:host .btn-dropdown{background-color:#fff;border:none;position:absolute;right:1px;top:1px;bottom:1px;width:40px;padding:0;outline:none;display:flex;align-content:center;justify-content:center}:host .btn-dropdown:before{content:'';display:block;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid #67615e;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}\n",""]),t.exports=e},function(t,e,o){"use strict";o.r(e);var n=o(0);const i=o.n(n).a.toString();class r extends HTMLElement{static get observedAttributes(){return["value"]}set value(t){this.setAttribute("value",t),""===t&&this.hideDropDown()}get value(){return this.getAttribute("value")}get dropDownElem(){return this.shadowRoot.querySelector(".dropdown")}get inputWrapper(){return this.shadowRoot.querySelector(".input-wrapper")}constructor(){super(),this.attachShadow({mode:"open"}),this.people=null,this.filteredPeople=[],this.activeFocusIndex=-1,this.dropDownOpen=!1}connectedCallback(){this.shadowRoot.innerHTML='<div class="autocomplete-wrapper">\n  <div class="input-wrapper">\n    <div class="search-icon"></div>\n    <input type="text" placeholder="Search for a person">\n    <button class="btn-dropdown"></div>\n    <div class="dropdown"></div>\n  </div>\n</div>';const t=document.createElement("style");t.innerHTML=i,this.shadowRoot.prepend(t),this.init()}init(){this.fetchData().then(t=>{this.people=t.results||[],this.initEvents(),this.initElems()}).catch(t=>console.log(t))}initElems(){this.hideDropDown()}initEvents(){const t=this.shadowRoot.querySelector("input"),e=this.shadowRoot.querySelector(".btn-dropdown");if(!t||!e)return;const o=this.dropDownSelect.bind(this),n=this.toggleDropDown.bind(this);this.addEventListener("input",this.onInput),this.addEventListener("keydown",this.onKeyDown),this.dropDownElem.addEventListener("click",o),e.addEventListener("click",n)}onInput(){const t=this.shadowRoot.querySelector("input").value;this.value=t,this.activeFocusIndex=-1,""!==t&&this.displayDropDown(this.getFilteredList(t))}onKeyDown(t){const e=this.filteredPeople.length-1;40===t.keyCode?(this.activeFocusIndex=this.activeFocusIndex>=e?0:this.activeFocusIndex+1,this.activateListItem()):38===t.keyCode?(this.activeFocusIndex=0===this.activeFocusIndex?e:this.activeFocusIndex-1,this.activateListItem()):13===t.keyCode&&(this.itemSelect(this.activeFocusIndex),t.preventDefault())}dropDownSelect(t){const e=t.target.getAttribute("data-value");this.setValue(e),t.preventDefault()}itemSelect(t){const e=this.dropDownElem.childNodes[t],o=!!e&&e.getAttribute("data-value");this.setValue(o)}setValue(t){if(t){const e=this.shadowRoot.querySelector("input");this.value=t,e.value=t,this.hideDropDown(),e.focus()}}activateListItem(){const t=this.dropDownElem.childNodes,e=this.dropDownElem.querySelector(`div[data-index="${this.activeFocusIndex}"]`);t.forEach(t=>{t.classList.remove("active")}),e&&e.classList&&e.classList.add("active")}displayDropDown(t){this.filteredPeople=t,!t||!t.length||t.length<=0?this.hideDropDown():this.showDropDown(t)}hideDropDown(){this.dropDownElem.classList.remove("display"),this.dropDownOpen=!1}showDropDown(t){const e=this.dropDownElem;e.classList.add("display"),e.innerHTML="",t.map((t,o)=>{e.append(this.createListItem(t,o))}),this.dropDownOpen=!0}createListItem(t,e){const{name:o,picture:n}=t,i=document.createElement("div"),r=o?`${o.first} ${o.last}`:"",s=n?n.thumbnail:"",a=document.createElement("div"),c=document.createElement("img");return c.setAttribute("src",s),a.append(c),a.className="icon-profile",i.innerHTML=r,i.className="list-item",i.setAttribute("data-index",e),i.setAttribute("data-value",r),i.prepend(a),i}getFilteredList(t){const e=this.people,o=t.toLowerCase();return e.reduce((t,e,n)=>(-1!==this.getFullname(e.name).toLowerCase().indexOf(o)&&t.push(e),t),[])}toggleDropDown(){this.dropDownOpen?this.hideDropDown():this.showDropDown(this.people)}async fetchData(){const t=await fetch("https://randomuser.me/api/?inc=picture,name&results=200");return await t.json()}disconnectedCallback(){const t=this.shadowRoot.querySelector("input"),e=this.shadowRoot.querySelector(".btn-dropdown");t&&e&&(this.removeEventListener("input",this.onInput),this.removeEventListener("keydown",this.onKeyDown),this.dropDownElem.removeEventListener("click",this.dropDownSelect),e.removeEventListener("click",this.toggleDropDown))}getFullname(t){const{first:e,last:o}=t;return`${e} ${o}`}}window.customElements.define("m-autocomplete",r)},function(t,e,o){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var o=function(t,e){var o=t[1]||"",n=t[3];if(!n)return o;if(e&&"function"==typeof btoa){var i=(s=n,a=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),"/*# ".concat(c," */")),r=n.sources.map((function(t){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(t," */")}));return[o].concat(r).concat([i]).join("\n")}var s,a,c;return[o].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(o,"}"):o})).join("")},e.i=function(t,o){"string"==typeof t&&(t=[[null,t,""]]);for(var n=0;n<t.length;n++){var i=[].concat(t[n]);o&&(i[2]?i[2]="".concat(o," and ").concat(i[2]):i[2]=o),e.push(i)}},e}}]);
//# sourceMappingURL=app.f6ecc3c7.js.map